
@{
    ViewBag.Title = "Display";
}

<h2>Display</h2>

<div>
    <video id='video_1' class="video-js vjs-default-skin vjs-big-play-centered" playsinline>
        <source src="https://192.168.2.181:8082/Videos/sample/index.m3u8" type="application/x-mpegURL">
    </video>
</div>

@*<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>*@
<script src="https://unpkg.com/video.js@7.5.4/dist/video.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-seek-buttons/dist/videojs-seek-buttons.min.js"></script>
<script src="https://cdn.sc.gl/videojs-hotkeys/0.2/videojs.hotkeys.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-mobile-ui@0.5.0/dist/videojs-mobile-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-quality-levels/2.0.9/videojs-contrib-quality-levels.js" integrity="sha512-LZHGk8dp6iG/NbFW8/kDFBcIvhVAXrI0V0W6icN8RldZWaGPwrony24mZuahj5XYbUbW7Q6Cq3CTRo2BBHOCmQ==" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-hls-quality-selector@1.1.4/dist/videojs-hls-quality-selector.js"></script>
@*<script src=@Html.Raw("https://cdn.jsdelivr.net/npm/@videojs/http-streaming@2.5.0/dist/videojs-http-streaming.min.js")></script>*@
@*<script src="~/Scripts/dash.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-dash/4.0.0/videojs-dash.min.js" integrity="sha512-aw/opNs7UL6pySX/cObxEb4SE6cv5Sui8FiLdy/8LHq4/+t1U0xTNUD72UoPL3poRUJmXnaS7FtMHX3qKoHkew==" crossorigin="anonymous"></script>*@


<script>
    var plyr = videojs("video_1", {
        autoplay: false,
        controls: true,
        loop: true,
        fluid: true,
        responsive: true,
        playbackRates: [0.25, 0.5, 1, 1.5, 2, 2.5, 3],
        //sources: [{
        //    type: "video/webm",
        //    src: "https://upload.wikimedia.org/wikipedia/commons/transcoded/a/ab/Caminandes_3_-_Llamigos_-_Blender_Animated_Short.webm/Caminandes_3_-_Llamigos_-_Blender_Animated_Short.webm.360p.webm"
        //}],
        html5: {
            vhs: {
                overrideNative: true
            },
            nativeAudioTracks: false,
            nativeVideoTracks: false
        },
        plugins: {
            seekButtons: {
                forward: 10,
                back: 10
            }
        }
    },
        function () {
            this.playbackRate(1);
            this.hotkeys({
                volumeStep: 0.1,
                seekStep: 5,
                enableModifiersForNumbers: false
            });
            //var player = this;
            //player.controlBar.addChild('QualitySelector');
        });

    @*var urlValue = "";
    function getUrl() {
        $.ajax({
            url: '@Url.Action("GetSource", "Home")',
            type: "GET",
            dataType: "json",
            success: function (result) {
                console.log(result);
                urlValue = result.data;
                plyr.src({ type: 'video/webm', src: urlValue });
                plyr.ready(function () {
                    plyr.play();
                });
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {

            },
            complete: function () {

            }
        });
    }

    getUrl();
    console.log(plyr);*@
</script>

<script>
    (function (window, videojs) {
        var testPlayer = window.testPlayer = videojs('video_1');
        testPlayer.endscreen = function () { };
        testPlayer.mobileUi({
            fullscreen: {
                iOS: true,
                enterOnRotate: true,
                exitOnRotate: true,
                lockOnRotate: true
            },
            touchControls: {
                seekSeconds: 10,
                tapTimeout: 300,
                disableOnEnd: false
            }
        });
    }(window, window.videojs));
</script>

